<div class="flex h-[93vh] bg-gray-100 overflow-hidden">
  <!-- Left Sidebar -->
  <div class="w-76 bg-white border-r">
    <div class="p-4">
      <h2 class="font-semibold mb-2">Chats</h2>

      <div class="flex space-x-1 mb-2 overflow-auto">
        <!-- DIRECT -->
        <span
          class="flex items-center px-2 py-1 bg-gray-300 text-gray-700 rounded-sm text-xs hover:cursor-pointer"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 mr-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 16h-1v-4h-1m0-4h.01M12 22a10 10 0 110-20 10 10 0 010 20z"
            />
          </svg>
          DIRECT
        </span>

        <!-- GROUPS -->
        <span
          class="flex items-center px-2 py-1 bg-gray-100 text-gray-700 rounded-sm text-xs hover:cursor-pointer"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 mr-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 20h5V10a1 1 0 00-1-1h-3m-6 0H5a1 1 0 00-1 1v10h5m0 0h6m0 0v-6m0 6v-6"
            />
          </svg>
          GROUPS
        </span>

        <!-- PUBLIC -->
        <span
          class="flex items-center px-2 py-1 bg-gray-100 text-gray-700 rounded-sm text-xs hover:cursor-pointer"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 mr-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"
            />
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 12v10m0 0c3.32-1.89 6-5.25 6-9a9 9 0 10-12 8.66c1.14.66 2.49 1.04 4 .87V12z"
            />
          </svg>
          PUBLIC
        </span>
      </div>

      <!-- users search area -->
      <div class="relative mb-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-4.35-4.35M16 10a6 6 0 11-12 0 6 6 0 0112 0z"
          />
        </svg>
        <input
          type="text"
          placeholder="Search"
          class="w-full p-2 pl-10 rounded-sm bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300"
        />
      </div>

      <!-- Users Area -->
      <div class="space-y-2 overflow-y-auto h-[75vh]">
        @for (chat of chats; track chat.id) {
        <div class="flex items-center space-x-2 bg-gray-100 p-2 rounded-sm">
          <!-- Profile Picture with Status Indicator -->
          <div class="relative">
            <img [src]="chat.avatar" alt="" class="w-10 h-10 rounded-full" />

            <!-- Status Circle -->
            <span
              class="absolute top-0 right-0 w-3.5 h-3.5 rounded-full border-2 border-white"
              [ngClass]="{
                'bg-green-500': chat.isActive,
                'bg-gray-400': !chat.isActive
              }"
            >
            </span>
          </div>

          <!-- User Information -->
          <div>
            <p class="font-semibold">{{ chat.name }}</p>
            <p class="text-sm text-gray-500">{{ chat.lastMessage }}</p>
          </div>
        </div>
        }
      </div>
    </div>
  </div>

  <!-- Main Chat Area -->
  <div class="flex-1 flex flex-col">
    <!-- Top Bar -->
    <div class="bg-white p-4 flex justify-between items-center border-b">
      <div class="flex items-center space-x-3">
        <img
          src="https://img.freepik.com/free-photo/beautiful-girl-stands-park_8353-5084.jpg?size=626&ext=jpg&ga=GA1.1.2008272138.1726963200&semt=ais_hybrid"
          alt=""
          class="w-10 h-10 rounded-full"
        />
        <div>
          <p class="font-semibold">Kirti Yadav</p>
          <!-- <p class="text-sm text-gray-500">Last seen 2 hours ago</p> -->
          <p class="text-sm text-green-500 font-semibold">Active now</p>
        </div>
      </div>
      <div class="flex space-x-4">
        <button class="text-gray-500">
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
            ></path>
          </svg>
        </button>
        <button class="text-gray-500">
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
            ></path>
          </svg>
        </button>
        <button class="text-gray-500">
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"
            ></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- message area -->
    <div #messageContainer class="flex-1 overflow-y-auto p-4 space-y-6">
      <div class="flex-1 overflow-y-auto p-4 space-y-6">
        <div
          *ngFor="let message of messages"
          class="flex"
          [ngClass]="{
            'justify-start': message.sender === 'me',
            'justify-end': message.sender === 'other'
          }"
        >
          <!-- Receiver Profile Pic -->
          <ng-container *ngIf="message.sender === 'me'">
            <img
              [src]="message.profilePic"
              alt="Receiver Profile Pic"
              class="rounded-full w-10 h-10 shadow-md mr-3"
            />
          </ng-container>

          <!-- Message Bubble -->
          <div
            [ngClass]="{
              'bg-gray-400 text-white': message.sender === 'other',
              'bg-white text-black': message.sender === 'me'
            }"
            class="rounded-lg p-3 shadow"
          >
            <div class="w-[30vw]">
              {{ message.text }}
            </div>

            <div class="relative flex justify-between">
              <!-- Time Ago (e.g., "1 minute ago") -->
              <span
                class="text-xs text-gray-300"
                [ngClass]="{
                  'mr-2': message.sender === 'me',
                  'ml-2': message.sender === 'other'
                }"
              >
                {{ timeAgo(message.timestamp) }}
              </span>

              <!-- Actual Timestamp (e.g., Date and Time) -->
              <span
                class="text-xs text-gray-300"
                [ngClass]="{
                  'mr-2': message.sender === 'me',
                  'ml-2': message.sender === 'other'
                }"
              >
                {{ message.timestamp | date : "shortTime" }}
              </span>
            </div>
          </div>

          <!-- Sender Profile Pic -->
          <ng-container *ngIf="message.sender === 'other'">
            <img
              [src]="message.profilePic"
              alt="Sender Profile Pic"
              class="rounded-full w-10 h-10 shadow-md ml-3"
            />
          </ng-container>
        </div>
      </div>
    </div>

    <!-- Message Input -->
    <div class="bg-white p-4 flex items-center space-x-2">
      <button class="text-gray-500">
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"
          ></path>
        </svg>
      </button>
      <input
        type="text"
        placeholder="Aa~"
        class="flex-1 p-2 rounded-md bg-gray-100"
      />
      <button class="text-gray-500">
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
      </button>
      <button class="text-gray-500 p-2 rounded-full">
        <svg
          class="w-6 h-6 transform rotate-90"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
          ></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Right Sidebar -->
  <div class="w-72 bg-white border-l">
    <div class="p-4 border-b">
      <h2 class="font-semibold">Notifications</h2>
    </div>

    <div class="p-4 space-y-4 h-[40vh] overflow-y-auto">
      @for (notification of notifications; track notification.id) {
      <div class="flex items-center space-x-3">
        <img [src]="notification.avatar" class="w-10 h-10 rounded-full" />
        <div>
          <p class="text-sm">
            <span class="font-semibold">{{ notification.name }}</span>
            {{ notification.action }}
          </p>
          <div class="flex justify-between">
            <p class="text-xs text-gray-500">{{ notification.time }}</p>
          </div>
        </div>
      </div>
      }
    </div>

    <div class="p-4 border-t h-[40vh] overflow-y-auto">
      <h2 class="font-semibold mb-4">Suggestions</h2>
      <div class="space-y-4">
        @for (suggestion of suggestions; track suggestion.id) {
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <img
              [src]="suggestion.avatar"
              alt=""
              class="w-10 h-10 rounded-full"
            />
            <p class="font-normal">{{ suggestion.name }}</p>
          </div>
          <button
            class="px-3 py-1 bg-green-100 text-green-500 rounded-sm text-sm"
          >
            Add
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</div>


